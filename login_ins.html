<!--
Front: Ventana de login a sistemas administrativos - inscripciones
Ing. Fernando Arreola
Sistemas administrativos, LCD
Ultima modificacion: 13-feb-2020-->

<html lang="es-MX">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Licenciatura en CD - Ingreso</title>

<link rel="shortcut icon" href="./images/iimas.ico">
<link href="css/font-awesome.css" rel="stylesheet">
<link href="css/bootstrap.min.css" rel="stylesheet" >
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="./js/jquery3.3.1.js"></script>
</head>
<body  class="text-center">

  <!--Barra de navegacion-->
  <header>
      <nav class="navbar navbar-expand-md navbar-dark" style="background:#00569e;">
      <a class="navbar-brand" href="#"><img src="./images/unam.svg"></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Hqwome</a>
          </li>
        

         

      </div>
      </nav>
  </header>

  <!--Formulario para el ingreso-->
  <div class="container-fluid" style="font-family:Roboto; ">
    <form class="form-signin" id = "fmPrincipal" enctype="multipart/form-data" action="proc_login_ins.php" method = "post" onsubmit="return fnValidaForm();">
      <div class="card-header">
        <h1 class="font-weight-bold" style="color:#00569e;">Sistemas administrativos LCD<br>Sección general</h1>
      </div>
      <div class="card-body">
        <img class="mb-4" src="./images/iimas_black.png" alt="" width="100" height="100">
        <h1 class="h3 mb-3 font-weight-normal">Ingresa tus datos</h1>

        <div class="form-group row">
          <label for="usuario" class="col-md-2 offset-md-4 col-form-label">Usuario</label>
          <div class="col-md-2">
            <input type="text" class="form-control"  id="txUser" name="usuario" onkeypress = "return fnVerifLetras(event)" placeholder="Usuario" maxlength="25">
          </div>
        </div>
        <br>

        <div class="form-group row">
          <label for="password" class="col-md-2 offset-md-4 col-form-label">Contraseña</label>
          <div class="col-md-2">
            <input type="password" class="form-control" id="txPassword" name="password" placeholder="Contraseña">
          </div>
        </div>

        <input type="hidden" name="validar" id="hdValidar" value="">
        <br><br>
        <center><div class="g-recaptcha" data-sitekey="6LfpTaMUAAAAAOzhk9yNreT6R2oKUYLlaN9MXJJp" data-callback="valida_captcha"></div></center>
        <br><br>
        <input type="submit" class="btn btn-outline-success" id="bnEnviar" value="Ingresar" disabled="disabled" onsubmit="return fnValidaForm();"/> <!--Añadir disabled="disabled"  disabled="disabled"-->
      </div>
      <div class="card-footer text-muted">
        Licenciatura en Ciencia de Datos
      </div>
    </form>
  </div>

<script src="/js/jquery-3.3.1.slim.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>

<!--Validamos el formulario-->
<script>
  //Funcion para permitir que solo se inserte texto en los campos.
  function fnVerifLetras(valor)
  {
      key = valor.keyCode || valor.which;
      tecla = String.fromCharCode(key).toLowerCase();
      letras = " áéíóúabcdefghijklmnñopqrstuvwxyz";
      especiales = "8-37-39-46";
      tecla_especial = false;
      for(var i in especiales)
      {
          if(key == especiales[i])
          {
              tecla_especial = true;
              break;
          }
      }
      if(letras.indexOf(tecla)==-1 && !tecla_especial)
      {
          return false;
      }
  }

  //Función para activar el botón de envío cuando el captcha se capture correctamente
  function valida_captcha() {
      $('#bnEnviar').removeAttr('disabled');
  };

  function fnValidaForm(){
    //Verificamos que no este vacio el nombre
    if($('#txUser').val() == ""){
      alert("Ingresa tu usuario");
      $('#txUser').focus();
      return false;
    }

    if($('#txPassword').val() == ""){
      alert("Ingresa tu contraseña");
      $('#txPassword').focus();
      return false;
    }

    //Variable para que se de acceso al servidor
    $('#hdValidar').val('exito');
    return true;
  }

  </script>
